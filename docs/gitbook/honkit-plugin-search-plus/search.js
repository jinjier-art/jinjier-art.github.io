require(["gitbook","jquery"],function(h,d){const f=500;let g={};const n=void 0!==window.history.pushState,t=d("body");function v(e){return String(e).replace(/([-.*+?^${}()|[\]/\\])/g,"\\$1")}function a(e){if(e&&("string"!=typeof e||""!==e.trim())){var t,n=new RegExp(v(e),"i"),o=new RegExp("("+v(e)+")","gi"),r=[];for(t in g){var a=g[t],s=a.body.search(n);-1!==s&&r.push({url:a.url,title:a.title,body:function(e,t){let n=e.replace(t,"$1");return n=(n=w(n)).replace(/\x7f([^\x7f]+)\x7f/g,'<span class="search-highlight-keyword">'+w("$1")+"</span>")}(a.body.substr(Math.max(0,s-50),f),o)})}{var i={count:r.length,query:e,results:r},e=d("#book-search-results");const p=e.find(".search-results-list");var l=(u=e.find(".search-results-title")).find(".search-results-count"),u=u.find(".search-query"),c=(e.addClass("open"),0===i.count);e.toggleClass("no-results",c),p.empty(),l.text(i.count),u.text(i.query);let a=1;i.results.forEach(function(e){var t=d("<li>",{class:"search-results-item"}),n=d("<h3>"),o=(n.prepend(d("<span>",{text:"["+a+"] "})),a++,d("<a>",{href:h.state.basePath+"/"+e.url+"?h="+encodeURIComponent(i.query),text:e.title,"data-is-search":1}));o[0].href.split("?")[0]===window.location.href.split("?")[0]&&o[0].setAttribute("data-need-reload",1);let r=e.body.trim();r.length>f&&(r+="...");e=d("<p>").html(r);n.append(o),t.append(n),t.append(e),p.append(t)}),d(".body-inner").scrollTop(0)}}}function w(e){return"string"!=typeof e?e:e.replace(/[&'`"<>]/g,function(e){return{"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[e]})}function o(e){var n,o,r;t.addClass("with-search"),t.addClass("search-loading"),n=function(){a(e),t.removeClass("search-loading")},function(){var e=this,t=arguments;r=r||setTimeout(function(){r=null,n.apply(e,t)},o)}()}function r(){t.removeClass("with-search"),d("#book-search-results").removeClass("open")}function e(){t.on("keyup","#book-search-input input",function(e){13===e.keyCode&&n&&(e=l("q",d(this).val()),window.history.pushState({path:e},null,e)),0===(e=d("#book-search-input input").val()).length?r():o(e)}),t.on("blur","#book-search-input input",function(e){var t;n&&(t=l("q",d(this).val()),window.history.pushState({path:t},null,t))})}h.events.on("start",function(){e(),d.getJSON(h.state.basePath+"/search_plus_index.json").then(function(e){g=e,i(),r()})});const s={ignoreJoiners:!0,acrossElements:!0,separateWordSearch:!1};function i(){var e,t,n;/\b(q|h)=([^&]+)/.test(window.location.search)&&(t=RegExp.$1,e=decodeURIComponent(RegExp.$2),"q"===t?o(e):(t=e,n=d(".page-inner"),/(?:(.+)?\:)(.+)/.test(t)&&n.mark(RegExp.$1,s),n.mark(t,s),setTimeout(function(){var e=d('mark[data-markjs="true"]');e.length&&e[0].scrollIntoView()},100)),d("#book-search-input input").val(e))}function l(e,t){t=encodeURIComponent(t);let n=window.location.href.replace(/([?&])(?:q|h)=([^&]+)(&|$)/,function(e,t,n,o){return"&"===o?t:""});var o,r=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");return r.test(n)?null!=t?n.replace(r,"$1"+e+"="+t+"$2$3"):(o=n.split("#"),n=o[0].replace(r,"$1$3").replace(/(&|\?)$/,""),void 0!==o[1]&&null!==o[1]&&(n+="#"+o[1]),n):(null!=t&&(r=-1!==n.indexOf("?")?"&":"?",o=n.split("#"),n=o[0]+r+e+"="+t,void 0!==o[1]&&null!==o[1]&&(n+="#"+o[1])),n)}h.events.on("page.change",i),window.addEventListener("click",function(e){"A"===e.target.tagName&&e.target.getAttribute("data-need-reload")&&setTimeout(function(){window.location.reload()},100)},!0)});